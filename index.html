<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskEco - Gestor de Tareas Ecológicas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        
    </style>
</head>
<body>
    <!-- Header/Navigation -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <img src="https://via.placeholder.com/40x40" alt="TaskEco Logo">
                    <h1>TaskEco</h1>
                </div>
                <ul class="nav-links">
                    <li><a href="#features">Características</a></li>
                    <li><a href="#how-it-works">Cómo Funciona</a></li>
                    <li><a href="#impact">Impacto</a></li>
                    <li><a href="#contact">Contacto</a></li>
                </ul>
                <div class="auth-buttons">
                    <button class="btn btn-login">Iniciar Sesión</button>
                    <button class="btn btn-register">Registrarse</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h2>Organiza tus tareas y salva el planeta</h2>
                <p>TaskEco combina productividad con sostenibilidad. Gana puntos ecológicos por completar tareas y contribuye a un mundo mejor mientras organizas tu día.</p>
                <button class="btn-primary">Empieza Gratis</button>
            </div>
            <div class="hero-image">
                <img src="https://via.placeholder.com/500x350" alt="TaskEco Dashboard Preview">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">Por qué elegir TaskEco</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h3>Impacto Ecológico</h3>
                    <p>Gana puntos por tareas sostenibles y sigue tu impacto positivo en el medio ambiente.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h3>Gestión de Tareas</h3>
                    <p>Organiza tus actividades diarias con nuestro sistema intuitivo y fácil de usar.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Desafíos Comunitarios</h3>
                    <p>Únete a retos grupales y compite por premios ecológicos con otros usuarios.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Preview -->
    <section class="dashboard-preview" id="how-it-works">
        <div class="container">
            <h2 class="section-title">Tu Panel de Control Ecológico</h2>
            <div class="dashboard-container">
                <div class="dashboard-description">
                    <h3>Sigue tu progreso en tiempo real</h3>
                    <p>Nuestro dashboard interactivo te muestra:</p>
                    <ul style="margin: 1rem 0 2rem 2rem;">
                        <li>Tus puntos ecológicos acumulados</li>
                        <li>El equivalente de tu impacto en ahorro de CO2</li>
                        <li>Comparación con tus metas mensuales</li>
                        <li>Recomendaciones personalizadas</li>
                    </ul>
                    <button class="btn-primary">Ver Demo</button>
                </div>
                <div class="dashboard-image">
                    <img src="https://via.placeholder.com/500x350" alt="TaskEco Dashboard">
                </div>
            </div>
        </div>
    </section>

    <!-- Impact Section -->
    <section class="features" id="impact" style="background-color: var(--primary-color); color: white;">
        <div class="container">
            <h2 class="section-title" style="color: white;">Impacto Colectivo</h2>
            <div style="text-align: center; max-width: 800px; margin: 0 auto;">
                <p style="margin-bottom: 2rem; font-size: 1.1rem;">Nuestra comunidad ha logrado:</p>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-bottom: 3rem;">
                    <div>
                        <h3 style="font-size: 2.5rem; margin-bottom: 0.5rem;">+10,000</h3>
                        <p>Tareas ecológicas completadas</p>
                    </div>
                    <div>
                        <h3 style="font-size: 2.5rem; margin-bottom: 0.5rem;">+5,000 kg</h3>
                        <p>de CO2 reducido</p>
                    </div>
                    <div>
                        <h3 style="font-size: 2.5rem; margin-bottom: 0.5rem;">+2,000</h3>
                        <p>Usuarios activos</p>
                    </div>
                </div>
                <button class="btn-primary" style="background: white; color: var(--primary-color);">Únete a la Comunidad</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="logo" style="justify-content: center;">
                <img src="https://via.placeholder.com/40x40" alt="TaskEco Logo">
                <h1>TaskEco</h1>
            </div>
            <p>Transformando hábitos diarios en acciones sostenibles</p>
            <ul class="footer-links">
                <li><a href="#features">Características</a></li>
                <li><a href="#how-it-works">Cómo Funciona</a></li>
                <li><a href="#impact">Impacto</a></li>
                <li><a href="#">Privacidad</a></li>
                <li><a href="#">Términos</a></li>
                <li><a href="#contact">Contacto</a></li>
            </ul>
            <div class="social-icons">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
            <p>&copy; 2023 TaskEco. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Simple JavaScript for demonstration
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // Mock login/register buttons
        document.querySelector('.btn-login').addEventListener('click', () => {
            alert('Redirigiendo a página de login...');
        });
        
        document.querySelector('.btn-register').addEventListener('click', () => {
            alert('Redirigiendo a página de registro...');
        });
    </script>

    <script type="module">
  import { auth } from './js/auth.js';
  import { taskManager } from './js/tasks.js';
  import { ecoImpact } from './js/ecoImpact.js';

  // Ejemplo de uso
  document.addEventListener('DOMContentLoaded', async () => {
    // Manejo de formulario de login
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
      loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = loginForm.email.value;
        const password = loginForm.password.value;
        
        const success = await auth.login(email, password);
        if (success) {
          window.location.href = '/dashboard.html';
        } else {
          alert('Error en el login. Verifica tus credenciales.');
        }
      });
    }

    // Cargar y mostrar tareas en el dashboard
    if (auth.isAuthenticated() && document.getElementById('tasks-container')) {
      try {
        const tasks = await taskManager.getAllTasks();
        renderTasks(tasks);
        
        const impactData = ecoImpact.calculateImpact(tasks);
        ecoImpact.renderPointsCounter('eco-points', impactData.totalPoints);
        
        const ctx = document.getElementById('eco-impact-chart').getContext('2d');
        ecoImpact.renderImpactChart(ctx, impactData);
      } catch (error) {
        console.error('Error loading dashboard data:', error);
      }
    }
  });

  function renderTasks(tasks) {
    const container = document.getElementById('tasks-container');
    container.innerHTML = '';
    
    tasks.forEach(task => {
      const taskElement = document.createElement('div');
      taskElement.className = `task-card ${task.completed ? 'completed' : ''}`;
      taskElement.innerHTML = `
        <h3>${task.title}</h3>
        <p>${task.description || 'Sin descripción'}</p>
        <div class="task-meta">
          <span class="category">${task.category}</span>
          <span class="due-date">${new Date(task.due_date).toLocaleDateString()}</span>
          <span class="eco-points">+${task.eco_impact.points} pts</span>
        </div>
        <button class="complete-btn" data-id="${task.id}">
          ${task.completed ? '✓ Completada' : 'Marcar como completada'}
        </button>
      `;
      container.appendChild(taskElement);
    });
    
    // Agregar event listeners a los botones
    document.querySelectorAll('.complete-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        const taskId = btn.dataset.id;
        const updatedTask = await taskManager.completeTask(taskId);
        if (updatedTask) {
          btn.textContent = '✓ Completada';
          btn.parentElement.classList.add('completed');
          // Actualizar puntos e impacto
          location.reload();
        }
      });
    });
  }
</script>
</body>
</html>